#include "pic.h"

void init_pic() {
	out8(MASTER_COMMAND_AND_STATUS_REG, 0x11);	// 0b00010001
	out8(MASTER_INTERMASK_AND_DATA_REG, 0x20); 	// ICW_2
	out8(MASTER_INTERMASK_AND_DATA_REG, 4); 	// 0b00000100
	out8(MASTER_INTERMASK_AND_DATA_REG, 1);		// mod

	out8(SLAVE_COMMAND_ANS_STATUS_REG, 0x11);	// 0b00010001
	out8(SLAVE_INTERMASK_AND_DATA_REG, 0x28);	// ICW_2
	out8(SLAVE_INTERMASK_AND_DATA_REG, 2);		// 0b00000010
	out8(SLAVE_INTERMASK_AND_DATA_REG, 1);		// mod

	out8(MASTER_INTERMASK_AND_DATA_REG, ((1 << 8) - 1) ^ 1);
	out8(SLAVE_INTERMASK_AND_DATA_REG, ((1 << 8) - 1));
}

void reset_master_eoi() {
	out8(MASTER_COMMAND_AND_STATUS_REG, EOI);
}

void reset_slave_eoi() {
	out8(SLAVE_COMMAND_ANS_STATUS_REG, EOI);
}
